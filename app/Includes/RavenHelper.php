<?php

namespace App\Includes;

class RavenHelper
{
   private $answer_sheet = [
      "1" => "4",
      "2" => "5",
      "3" => "1",
      "4" => "2",
      "5" => "6",
      "6" => "3",
      "7" => "6",
      "8" => "2",
      "9" => "1",
      "10" => "3",
      "11" => "4",
      "12" => "5",
      "13" => "2",
      "14" => "6",
      "15" => "2",
      "16" => "2",
      "17" => "1",
      "18" => "3",
      "19" => "5",
      "20" => "6",
      "21" => "4",
      "22" => "3",
      "23" => "4",
      "24" => "5",
      "25" => "8",
      "26" => "2",
      "27" => "3",
      "28" => "8",
      "29" => "7",
      "30" => "4",
      "31" => "5",
      "32" => "1",
      "33" => "7",
      "34" => "6",
      "35" => "1",
      "36" => "2",
      "37" => "4",
      "38" => "3",
      "39" => "3",
      "40" => "7",
      "41" => "8",
      "42" => "6",
      "43" => "5",
      "44" => "4",
      "45" => "1",
      "46" => "2",
      "47" => "5",
      "48" => "6",
      "49" => "7",
      "50" => "6",
      "51" => "8",
      "52" => "2",
      "53" => "1",
      "54" => "5",
      "55" => "2",
      "56" => "6",
      "57" => "1",
      "58" => "6",
      "59" => "3",
      "60" => "5",
   ];

   private $lookup_table = [
      "9" => [
         "1" => "54",
         "2" => "56",
         "3" => "51",
         "4" => "66",
         "5" => "71",
         "6" => "75",
         "7" => "78",
         "8" => "82",
         "9" => "85",
         "10" => "87",
         "11" => "90",
         "12" => "92",
         "13" => "94",
         "14" => "96",
         "15" => "98",
         "16" => "100",
         "17" => "101",
         "18" => "102",
         "19" => "104",
         "20" => "105",
         "21" => "106",
         "22" => "107",
         "23" => "108",
         "24" => "110",
         "25" => "111",
         "26" => "112",
         "27" => "113",
         "28" => "114",
         "29" => "115",
         "30" => "116",
         "31" => "117",
         "32" => "119",
         "33" => "120",
         "34" => "121",
         "35" => "122",
         "36" => "124",
         "37" => "125",
         "38" => "126",
         "39" => "127",
         "40" => "128",
         "41" => "130",
         "42" => "131",
         "43" => "133",
         "44" => "134",
         "45" => "135",
         "46" => "137",
         "47" => "138",
         "48" => "140",
         "49" => "142",
         "50" => "144",
         "51" => "164",
         "52" => "149",
         "53" => "149",
         "54" => "149",
         "55" => "149",
         "56" => "149",
         "57" => "149",
         "58" => "149",
         "59" => "149",
         "60" => "149",
      ],
      "10" => [
         "1" => "51",
         "2" => "54",
         "3" => "56",
         "4" => "61",
         "5" => "66",
         "6" => "73",
         "7" => "75",
         "8" => "87",
         "9" => "80",
         "10" => "83",
         "11" => "86",
         "12" => "88",
         "13" => "89",
         "14" => "92",
         "15" => "93",
         "16" => "95",
         "17" => "96",
         "18" => "98",
         "19" => "99",
         "20" => "101",
         "21" => "102",
         "22" => "103",
         "23" => "104",
         "24" => "105",
         "25" => "106",
         "26" => "107",
         "27" => "109",
         "28" => "110",
         "29" => "111",
         "30" => "112",
         "31" => "113",
         "32" => "114",
         "33" => "115",
         "34" => "116",
         "35" => "117",
         "36" => "118",
         "37" => "119",
         "38" => "120",
         "39" => "121",
         "40" => "122",
         "41" => "124",
         "42" => "125",
         "43" => "126",
         "44" => "127",
         "45" => "128",
         "46" => "130",
         "47" => "131",
         "48" => "132",
         "49" => "134",
         "50" => "135",
         "51" => "137",
         "52" => "138",
         "53" => "140",
         "54" => "141",
         "55" => "144",
         "56" => "146",
         "57" => "149",
         "58" => "149",
         "59" => "149",
         "60" => "149",
      ],
      "11" => [
         "1" => "51",
         "2" => "51",
         "3" => "54",
         "4" => "56",
         "5" => "60",
         "6" => "64",
         "7" => "69",
         "8" => "73",
         "9" => "87",
         "10" => "81",
         "11" => "83",
         "12" => "87",
         "13" => "88",
         "14" => "90",
         "15" => "92",
         "16" => "93",
         "17" => "94",
         "18" => "96",
         "19" => "97",
         "20" => "99",
         "21" => "100",
         "22" => "101",
         "23" => "102",
         "24" => "103",
         "25" => "104",
         "26" => "105",
         "27" => "106",
         "28" => "107",
         "29" => "108",
         "30" => "109",
         "31" => "110",
         "32" => "111",
         "33" => "112",
         "34" => "113",
         "35" => "114",
         "36" => "115",
         "37" => "116",
         "38" => "117",
         "39" => "118",
         "40" => "119",
         "41" => "120",
         "42" => "121",
         "43" => "122",
         "44" => "124",
         "45" => "125",
         "46" => "126",
         "47" => "127",
         "48" => "128",
         "49" => "129",
         "50" => "131",
         "51" => "131",
         "52" => "135",
         "53" => "136",
         "54" => "137",
         "55" => "138",
         "56" => "141",
         "57" => "146",
         "58" => "146",
         "59" => "149",
         "60" => "149",
      ],
      "12" => [
         "1" => "51",
         "2" => "51",
         "3" => "51",
         "4" => "54",
         "5" => "59",
         "6" => "63",
         "7" => "67",
         "8" => "71",
         "9" => "74",
         "10" => "77",
         "11" => "79",
         "12" => "82",
         "13" => "85",
         "14" => "87",
         "15" => "89",
         "16" => "90",
         "17" => "91",
         "18" => "93",
         "19" => "95",
         "20" => "96",
         "21" => "97",
         "22" => "98",
         "23" => "100",
         "24" => "101",
         "25" => "102",
         "26" => "103",
         "27" => "104",
         "28" => "105",
         "29" => "106",
         "30" => "107",
         "31" => "108",
         "32" => "109",
         "33" => "110",
         "34" => "111",
         "35" => "112",
         "36" => "113",
         "37" => "114",
         "38" => "115",
         "39" => "116",
         "40" => "117",
         "41" => "118",
         "42" => "119",
         "43" => "120",
         "44" => "121",
         "45" => "122",
         "46" => "123",
         "47" => "124",
         "48" => "125",
         "49" => "126",
         "50" => "129",
         "51" => "131",
         "52" => "132",
         "53" => "134",
         "54" => "136",
         "55" => "137",
         "56" => "140",
         "57" => "142",
         "58" => "146",
         "59" => "149",
         "60" => "149",
      ],
      "13" => [
         "1" => "51",
         "2" => "51",
         "3" => "51",
         "4" => "51",
         "5" => "54",
         "6" => "58",
         "7" => "61",
         "8" => "64",
         "9" => "68",
         "10" => "71",
         "11" => "73",
         "12" => "75",
         "13" => "78",
         "14" => "79",
         "15" => "82",
         "16" => "84",
         "17" => "86",
         "18" => "88",
         "19" => "90",
         "20" => "91",
         "21" => "92",
         "22" => "94",
         "23" => "95",
         "24" => "96",
         "25" => "97",
         "26" => "99",
         "27" => "100",
         "28" => "101",
         "29" => "102",
         "30" => "103",
         "31" => "104",
         "32" => "105",
         "33" => "106",
         "34" => "107",
         "35" => "109",
         "36" => "110",
         "37" => "111",
         "38" => "112",
         "39" => "113",
         "40" => "114",
         "41" => "116",
         "42" => "117",
         "43" => "118",
         "44" => "119",
         "45" => "121",
         "46" => "121",
         "47" => "123",
         "48" => "124",
         "49" => "126",
         "50" => "127",
         "51" => "129",
         "52" => "130",
         "53" => "132",
         "54" => "133",
         "55" => "135",
         "56" => "137",
         "57" => "140",
         "58" => "144",
         "59" => "146",
         "60" => "149",
      ],
      "14" => [
         "1" => "51",
         "2" => "51",
         "3" => "51",
         "4" => "51",
         "5" => "51",
         "6" => "54",
         "7" => "58",
         "8" => "61",
         "9" => "65",
         "10" => "68",
         "11" => "70",
         "12" => "72",
         "13" => "74",
         "14" => "77",
         "15" => "79",
         "16" => "81",
         "17" => "82",
         "18" => "84",
         "19" => "85",
         "20" => "87",
         "21" => "88",
         "22" => "89",
         "23" => "91",
         "24" => "92",
         "25" => "93",
         "26" => "94",
         "27" => "96",
         "28" => "97",
         "29" => "98",
         "30" => "99",
         "31" => "100",
         "32" => "101",
         "33" => "102",
         "34" => "103",
         "35" => "104",
         "36" => "105",
         "37" => "106",
         "38" => "107",
         "39" => "109",
         "40" => "110",
         "41" => "111",
         "42" => "113",
         "43" => "114",
         "44" => "116",
         "45" => "117",
         "46" => "119",
         "47" => "120",
         "48" => "122",
         "49" => "124",
         "50" => "125",
         "51" => "127",
         "52" => "128",
         "53" => "129",
         "54" => "131",
         "55" => "134",
         "56" => "136",
         "57" => "139",
         "58" => "141",
         "59" => "144",
         "60" => "146",
      ],
      "15" => [
         "1" => "51",
         "2" => "51",
         "3" => "51",
         "4" => "51",
         "5" => "51",
         "6" => "51",
         "7" => "54",
         "8" => "58",
         "9" => "61",
         "10" => "63",
         "11" => "67",
         "12" => "69",
         "13" => "71",
         "14" => "73",
         "15" => "74",
         "16" => "76",
         "17" => "78",
         "18" => "79",
         "19" => "80",
         "20" => "82",
         "21" => "83",
         "22" => "84",
         "23" => "85",
         "24" => "86",
         "25" => "87",
         "26" => "88",
         "27" => "89",
         "28" => "90",
         "29" => "92",
         "30" => "93",
         "31" => "94",
         "32" => "95",
         "33" => "96",
         "34" => "98",
         "35" => "99",
         "36" => "100",
         "37" => "101",
         "38" => "102",
         "39" => "104",
         "40" => "105",
         "41" => "107",
         "42" => "108",
         "43" => "110",
         "44" => "112",
         "45" => "113",
         "46" => "115",
         "47" => "117",
         "48" => "119",
         "49" => "121",
         "50" => "122",
         "51" => "124",
         "52" => "126",
         "53" => "128",
         "54" => "130",
         "55" => "132",
         "56" => "134",
         "57" => "136",
         "58" => "138",
         "59" => "140",
         "60" => "144",
      ],
      "16" => [
         "1" => "51",
         "2" => "51",
         "3" => "51",
         "4" => "51",
         "5" => "51",
         "6" => "51",
         "7" => "51",
         "8" => "54",
         "9" => "56",
         "10" => "60",
         "11" => "62",
         "12" => "64",
         "13" => "67",
         "14" => "69",
         "15" => "71",
         "16" => "72",
         "17" => "74",
         "18" => "76",
         "19" => "77",
         "20" => "79",
         "21" => "80",
         "22" => "81",
         "23" => "83",
         "24" => "74",
         "25" => "85",
         "26" => "86",
         "27" => "88",
         "28" => "89",
         "29" => "90",
         "30" => "91",
         "31" => "92",
         "32" => "93",
         "33" => "94",
         "34" => "96",
         "35" => "97",
         "36" => "98",
         "37" => "99",
         "38" => "100",
         "39" => "101",
         "40" => "102",
         "41" => "104",
         "42" => "106",
         "43" => "107",
         "44" => "109",
         "45" => "110",
         "46" => "112",
         "47" => "114",
         "48" => "116",
         "49" => "118",
         "50" => "119",
         "51" => "121",
         "52" => "123",
         "53" => "125",
         "54" => "126",
         "55" => "129",
         "56" => "131",
         "57" => "134",
         "58" => "137",
         "59" => "138",
         "60" => "141",
      ],
      "17" => [
         "1" => "51",
         "2" => "51",
         "3" => "51",
         "4" => "51",
         "5" => "51",
         "6" => "51",
         "7" => "51",
         "8" => "51",
         "9" => "54",
         "10" => "58",
         "11" => "60",
         "12" => "63",
         "13" => "65",
         "14" => "67",
         "15" => "69",
         "16" => "70",
         "17" => "72",
         "18" => "74",
         "19" => "75",
         "20" => "76",
         "21" => "78",
         "22" => "79",
         "23" => "81",
         "24" => "81",
         "25" => "82",
         "26" => "83",
         "27" => "84",
         "28" => "86",
         "29" => "87",
         "30" => "88",
         "31" => "89",
         "32" => "90",
         "33" => "90",
         "34" => "93",
         "35" => "94",
         "36" => "95",
         "37" => "96",
         "38" => "98",
         "39" => "99",
         "40" => "100",
         "41" => "102",
         "42" => "104",
         "43" => "105",
         "44" => "107",
         "45" => "108",
         "46" => "110",
         "47" => "112",
         "48" => "113",
         "49" => "115",
         "50" => "117",
         "51" => "119",
         "52" => "120",
         "53" => "122",
         "54" => "124",
         "55" => "126",
         "56" => "129",
         "57" => "131",
         "58" => "134",
         "59" => "134",
         "60" => "138",
      ],
      "18" => [
         "1" => "51",
         "2" => "51",
         "3" => "51",
         "4" => "51",
         "5" => "51",
         "6" => "51",
         "7" => "51",
         "8" => "51",
         "9" => "51",
         "10" => "54",
         "11" => "58",
         "12" => "61",
         "13" => "62",
         "14" => "64",
         "15" => "66",
         "16" => "68",
         "17" => "69",
         "18" => "71",
         "19" => "72",
         "20" => "74",
         "21" => "75",
         "22" => "76",
         "23" => "78",
         "24" => "79",
         "25" => "80",
         "26" => "81",
         "27" => "82",
         "28" => "83",
         "29" => "85",
         "30" => "86",
         "31" => "87",
         "32" => "88",
         "33" => "89",
         "34" => "91",
         "35" => "92",
         "36" => "93",
         "37" => "94",
         "38" => "96",
         "39" => "97",
         "40" => "98",
         "41" => "100",
         "42" => "101",
         "43" => "102",
         "44" => "104",
         "45" => "106",
         "46" => "107",
         "47" => "109",
         "48" => "111",
         "49" => "112",
         "50" => "114",
         "51" => "116",
         "52" => "118",
         "53" => "120",
         "54" => "122",
         "55" => "124",
         "56" => "126",
         "57" => "127",
         "58" => "131",
         "59" => "133",
         "60" => "136",
      ],
   ];

   public function calculateAnswerSheet($sheet, $age)
   {
      $score = 0;
      foreach ($sheet as $key => $value) {
         if ($this->answer_sheet[$key] == $value) $score++;
      }

      $score = ($score == 0) ? 1 : $score;
      return $this->lookup_table[$age][$score];
   }

   public function getIqLevel($iq)
   {
      if ($iq <= 88)
         return "پایین تر از متوسط";
      elseif ($iq > 88 && $iq <= 112)
         return "متوسط";
      elseif ($iq > 112 && $iq <= 124)
         return  "ممتاز";
      elseif ($iq > 124 && $iq <= 148)
         return  "بسیار ممتاز";
      elseif ($iq > 148)
         return "حدود نابغه";
   }
}
